{% extends "new_base_fixed.html" %}

{% block page_title %}ê¸€ì“°ê¸°{% endblock %}

{% block content %}
<div class="container">
    <!-- í—¤ë” ì„¹ì…˜ -->
    <div class="header-section">
        <h1>âœï¸ ìƒˆ ê¸€ ì‘ì„±</h1>
        <p>ë°©í†µëŒ€ ì»´í“¨í„° ê³¼í•™ê³¼ ì»¤ë®¤ë‹ˆí‹°ì— ì†Œì¤‘í•œ ì´ì•¼ê¸°ë¥¼ ê³µìœ í•´ë³´ì„¸ìš”</p>
    </div>

    <!-- ê¸€ì“°ê¸° í¼ -->
    <div class="form-container">
        <div class="section-header">
            <h3>ğŸ“ ê²Œì‹œê¸€ ì •ë³´</h3>
            <div class="section-divider"></div>
        </div>

        <!-- í”Œë˜ì‹œ ë©”ì‹œì§€ -->
        {% with messages = get_flashed_messages() %}
        {% if messages %}
            {% for message in messages %}
            <div class="flash-message">
                <i class="fas fa-exclamation-triangle"></i>
                {{ message }}
            </div>
            {% endfor %}
        {% endif %}
        {% endwith %}

        <form method="POST" action="{{ url_for('main.create_post') }}">
            <!-- ê²Œì‹œíŒ ìœ í˜• ì„ íƒ -->
            <div class="form-group">
                <label>
                    <i class="fas fa-folder-open"></i>
                    ê²Œì‹œíŒ ìœ í˜•
                </label>
                <select name="board_type" required class="form-input form-select">
                    <option value="">ğŸ“‚ ê²Œì‹œíŒì„ ì„ íƒí•˜ì„¸ìš”</option>
                    <option value="ì¼ë°˜">ğŸ’¬ ì¼ë°˜ ê²Œì‹œíŒ</option>
                    <option value="ì§ˆë¬¸">â“ ì§ˆë¬¸ ê²Œì‹œíŒ</option>
                    <option value="ì •ë³´">ğŸ“¢ ì •ë³´ ê³µìœ </option>
                    <option value="ì¤‘ê³ ">ğŸ›’ ì¤‘ê³ ê±°ë˜</option>
                    <option value="ììœ ">ğŸ‰ ììœ  ê²Œì‹œíŒ</option>
                </select>
            </div>

            <!-- ì œëª© -->
            <div class="form-group">
                <label>
                    <i class="fas fa-heading"></i>
                    ì œëª©
                </label>
                <input type="text" name="title" required maxlength="100" 
                       placeholder="âœ¨ ë§¤ë ¥ì ì¸ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”"
                       class="form-input">
            </div>

            <!-- ë‚´ìš© -->
            <div class="form-group">
                <label>
                    <i class="fas fa-edit"></i>
                    ë‚´ìš©
                </label>
                <textarea name="content" required rows="14"
                          placeholder="ğŸ“ ì—¬ëŸ¬ë¶„ì˜ ì†Œì¤‘í•œ ì´ì•¼ê¸°ë¥¼ ììœ ë¡­ê²Œ ì‘ì„±í•´ì£¼ì„¸ìš”...&#10;&#10;ğŸ’¡ íŒ: &#10;- ë‹¤ë¥¸ ì‚¬ëŒë“¤ì—ê²Œ ë„ì›€ì´ ë˜ëŠ” ë‚´ìš©ì„ ê³µìœ í•´ë³´ì„¸ìš”&#10;- ì§ˆë¬¸ì´ë¼ë©´ êµ¬ì²´ì ìœ¼ë¡œ ì‘ì„±í•´ì£¼ì„¸ìš”&#10;- ì„œë¡œ ì¡´ì¤‘í•˜ëŠ” ë§ˆìŒìœ¼ë¡œ ì†Œí†µí•´ìš”"
                          class="form-input form-textarea"></textarea>
            </div>

            <!-- ì¤‘ê³ ê±°ë˜ ì „ìš© ê°€ê²© í•„ë“œ -->
            <div id="price_field" class="form-group price-field">
                <label>
                    <i class="fas fa-won-sign"></i>
                    ê°€ê²©
                </label>
                <input type="number" name="price" min="0" 
                       placeholder="ğŸ’° ê°€ê²©ì„ ì…ë ¥í•˜ì„¸ìš” (ì›)"
                       class="form-input">
            </div>

            <!-- ë²„íŠ¼ ê·¸ë£¹ -->
            <div class="button-group">
                <a href="{{ url_for('main.new_community') }}" class="btn-secondary-custom">
                    <i class="fas fa-arrow-left"></i>
                    ì·¨ì†Œ
                </a>
                <button type="submit" class="btn-primary-custom">
                    <i class="fas fa-paper-plane"></i>
                    ì‘ì„±í•˜ê¸°
                </button>
            </div>
        </form>
    </div>
</div>

<script>
// ê²Œì‹œíŒ ìœ í˜•ì— ë”°ë¼ ê°€ê²© í•„ë“œ í‘œì‹œ/ìˆ¨ê¹€
document.querySelector('select[name="board_type"]').addEventListener('change', function() {
    const priceField = document.getElementById('price_field');
    if (this.value === 'ì¤‘ê³ ') {
        priceField.classList.add('show');
        priceField.querySelector('input').required = true;
    } else {
        priceField.classList.remove('show');
        priceField.querySelector('input').required = false;
    }
});

// í¼ ì œì¶œ ì „ ìœ íš¨ì„± ê²€ì‚¬
document.querySelector('form').addEventListener('submit', function(e) {
    const boardType = document.querySelector('select[name="board_type"]').value;
    const title = document.querySelector('input[name="title"]').value.trim();
    const content = document.querySelector('textarea[name="content"]').value.trim();
    
    if (!boardType || !title || !content) {
        e.preventDefault();
        alert('ëª¨ë“  í•„ìˆ˜ í•­ëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”! ğŸ“');
        return;
    }
    
    if (title.length < 5) {
        e.preventDefault();
        alert('ì œëª©ì€ 5ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”! âœï¸');
        return;
    }
    
    if (content.length < 10) {
        e.preventDefault();
        alert('ë‚´ìš©ì€ 10ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”! ğŸ“„');
        return;
    }
});
</script>
{% endblock %}
